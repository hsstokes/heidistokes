'use strict';mix_d("MonarchShoppingCXFeedbackWidgetCards__shopping-cx-feedback-widget:shopping-cx-feedback-widget__dyI1Ps9o","exports tslib @c/metrics @c/pagemarker @c/scoped-dom @c/dom @c/remote-operations".split(" "),function(J,p,r,R,S,T,U){function y(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var V=y(R),f=y(S),G=y(T),W=y(U),z=function(){return W["default"].setup()},X={CREDIT_CARD_NUMBER:[/\b\d{15,16}\b/i,/\b\d{4}([\- ])\d{4}\1\d{4}\1\d{4}\b/i],PASSPORT:[/\b[Cc\d]\d{8}\b/i],
ADDRESS:[/\d{1,5}\s([\w\.\-]+\s){1,3}(st|ln|rd|ave|dr|pl|pkwy|blvd|street|lane|road|avenue|drive|parkway|boulevard)\b/i],PHONE_NUMBER:[/\b(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?\b/g],EMAIL:[/[a-z0-9!#$%&'*+\/=?\^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?\^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i]},
Y={NA:{CREDIT_CARD_NUMBER:[/\b\d{4}([\- ])\d{6}\1\d{5}\b/i],NATIONAL_IDENTIFIER:[/\b(?!000)\d{3}[\- ](?!00)\d{2}[\- ](?!0000)\d{4}\b/i,/\b\d{2}[\- ]\d{7}\b/i],PASSPORT:[/\b[A-z]{2}[0-9]{7}\b/i],ADDRESS:[/\b\d{5}[ \-]\d{4}\b/,/\b(?:[ABCEGHJ-NPRSTVXY]\d[A-Z][ -]?\d[A-Z]\d)\b/i],PHONE_NUMBER:[/\b(?:\+\d{1,3}[\( \-\/\-])?(?:\d{3}|\(\d{3}\))([ -\/\.])\d{3}([\-\/\.])\d{4}\s*((x|ex\w*|#)\s*\d+)?\b/g]},EU:{CREDIT_CARD_NUMBER:[],NATIONAL_IDENTIFIER:[],PASSPORT:[/\b[A-z][0-9]{6}\b/i,/\b[A-z]{2}[0-9]{7}\b/i,
/\b[A-z0-9][0-9]{7}\b/i,/\b[CFGHJK0-9][0-9]{3}[CHJKLMNPRTVWXYZ0-9]{5}[0-9]\b/i,/\b[A-z][0-9]{6,7}\b/i,/\b[0-9]{12}\b/i,/\b[0-9]{2}[A-z]{2}[0-9]{5}\b/i,/\b[A-z] ?[0-9]{7}\b/i],ADDRESS:[/\b(?:[0-8]\d|9[0-8])\d{3}\b/i,/\b\d{5}\b/i,/\b(?:NL-)?(?:[1-9]\d{3} ?(?:[A-EGHJ-NPRTVWXZ][A-EGHJ-NPRSTVWXZ]|S[BCEGHJ-NPRTVWXZ]))\b/i,/\b(?:0[1-9]|[1-4]\d|5[0-2])\d{3}\b/,/\b[1-9]\d{3}\b/,/\b(?:GIR 0AA|(?:(?:(?:A[BL]|B[ABDHLNRSTX]?|C[ABFHMORTVW]|D[ADEGHLNTY]|E[HNX]?|F[KY]|G[LUY]?|H[ADGPRSUX]|I[GMPV]|JE|K[ATWY]|L[ADELNSU]?|M[EKL]?|N[EGNPRW]?|O[LX]|P[AEHLOR]|R[GHM]|S[AEGK-PRSTY]?|T[ADFNQRSW]|UB|W[ADFNRSV]|YO|ZE)[1-9]?\d|(?:(?:E|N|NW|SE|SW|W)1|EC[1-4]|WC[12])[A-HJKMNPR-Y]|(?:SW|W)(?:[2-9]|[1-9]\d)|EC[1-9]\d)\d[ABD-HJLNP-UW-Z]{2}))\b/i],
PHONE_NUMBER:[/(\+|\b011\W*)(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7)(\W*\d){1,14}\b/i]},FE:{CREDIT_CARD_NUMBER:[],NATIONAL_IDENTIFIER:[],PASSPORT:[/\b[Cc\d]\d{8}\b/i],ADDRESS:[/\b(?:(?:[2-8]\d|9[0-7]|0?[28]|0?9(?=09))(?:\d{2}))\b/i,/\b\d{3}-\d{4}\b/],PHONE_NUMBER:[/(\+|\b011\W*)(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7)(\W*\d){1,14}\b/i]}},
Z={ABUSE_WORD:[/\bsh[i|*|1]t\b|\bf[u|*][c|*]k\b|\bb[i|*]tch\b|\bcrap\b|\bsucks\b|\bdamn\b|\bwhore\b|\bass\b|\\s/ig]},g;(function(a){a.NA="NA";a.FE="FE";a.EU="EU"})(g||(g={}));var K;(K||(K={})).PNG="png";var aa=/[0-9]{9}[0-9X]|[A-Z][A-Z0-9]{9}/,H=function(a,b,d){var c,e,m=b.violationMap;b=b.textAfterValidation;for(var l in a){var A=a[l];try{for(var t=(c=void 0,p.__values(A)),q=t.next();!q.done;q=t.next()){var k=b.match(q.value);k&&(k="CREDIT_CARD_NUMBER"===l?k.filter(Boolean).filter(ba):k.filter(Boolean),
0<k.length&&(d?b=b.replace(new RegExp("\\b"+k.join("\\b|\\b")+"\\b","gi"),""):m[l]?m[l]=m[l].concat(k):m[l]=k))}}catch(B){c={error:B}}finally{try{q&&!q.done&&(e=t.return)&&e.call(t)}finally{if(c)throw c.error;}}}return{textAfterValidation:b,violationMap:m}},ba=function(a){if(/[^0-9\-\s]+/.test(a))return!1;var b=0,d=!1;a=a.replace(/\D/g,"");if(""===a)return!1;for(var c=a.length-1;0<=c;c--){var e=a.charAt(c);e=parseInt(e,10);d&&(e*=2,9<e&&(e-=9));b+=e;d=!d}return 0===b%10},C;(function(a){a.Rating="Rating";
a.Text="Text"})(C||(C={}));var u,ca=function(){return p.__awaiter(void 0,void 0,void 0,function(){var a,b;return p.__generator(this,function(d){if(!u&&(a=f["default"].cardRoot.querySelector(".localizedStrings[data-localized-strings]")))if(b=a.getAttribute("data-localized-strings"))try{u=JSON.parse(b)}catch(c){throw Error("Failed to parse localized strings");}else throw Error("No localized strings found");return[2,u]})})},ea=function(){return p.__awaiter(void 0,void 0,void 0,function(){var a,b;return p.__generator(this,
function(d){switch(d.label){case 0:a=f["default"].cardRoot.getElementsByClassName("shoppingCxFeedbackRootWidget")[0];if(!a)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,z().getRatingFeedbackHtml()];case 2:return(b=d.sent())&&b.outerHTML&&(a.innerHTML=b.outerHTML,da()),[3,4];case 3:return d.sent(),[3,4];case 4:return[3,5];case 5:return[2]}})})},fa=function(a){return"string"!==typeof a?(r.count("shoppingcxWidgetEmptyAsin",1),null):10<a.length||!aa.test(a)?(r.count("shoppingcxWidgetInvalidAsin",
1),null):a},da=function(){var a=f["default"].cardRoot.getElementsByClassName("_shopping-cx-feedback-widget_style_shopping-cx-feedback-widget__3OJWU")[0],b=f["default"].cardRoot.getElementsByClassName("widgetContentContainer")[0],d=f["default"].cardRoot.getElementsByClassName("_shopping-cx-feedback-widget_style_feedback-radio-heading__3pMbk")[0],c=f["default"].cardRoot.getElementsByClassName("feedbackRadioButton"),e=f["default"].cardRoot.getElementsByClassName("_shopping-cx-feedback-widget_style_mobileRadioButton__30Bc-"),
m=p.__spread(Array.from(c),Array.from(e)),l=f["default"].cardRoot.getElementsByClassName("_shopping-cx-feedback-widget_style_feedback-submit-button__1SErF")[0].getElementsByTagName("input")[0],A=l.closest(".a-button");a&&r.count("shoppingcxWidgetGlanceView",1);c=f["default"].cardRoot.getElementsByClassName("shoppingCxFeedbackRootWidget")[0];var t=fa(c.dataset.asin);for(c=0;c<m.length;c++)e=null,e=m[c],(e="INPUT"===e.tagName&&"radio"===e.type?e:e.getElementsByTagName("input")[0])&&e.addEventListener("change",
function(){A.classList.remove("_shopping-cx-feedback-widget_style_feedbackSubmitButtonHidden__16RnH")});l.addEventListener("click",function(){l.disabled=!0;A.classList.add("a-button-disabled");for(var k=0;k<m.length;k++){var B=m[k].getElementsByTagName("input")[0];B&&(B.disabled=!0)}r.count("ratingFeedbackSubmitted",1);k=f["default"].cardRoot.querySelector('input[type="radio"]:checked');var L=Number(k.value);ha(L,d.textContent,t);z().getTextFeedbackHtml().then(function(v){b&&(b.innerHTML=v.outerHTML);
v=f["default"].cardRoot.getElementsByClassName("_shopping-cx-feedback-widget_style_feedback-submit-button__1SErF")[0];var n=f["default"].cardRoot.getElementsByTagName("textarea")[0],I=v.closest(".a-button"),M=f["default"].cardRoot.getElementsByClassName("_shopping-cx-feedback-widget_style_text-feedback-alert-info__iTrz-")[0];I.classList.add("_shopping-cx-feedback-widget_style_textFeedbackSubmitHidden__1fujz");setTimeout(function(){n.focus()},0);if(v&&n){var w=!1;v.addEventListener("click",function(){r.count("textFeedbackSubmitted",
1);w&&(D(!1),w=!1);var h=n.value,x=d.textContent,E=f["default"].cardRoot.getElementsByClassName("mkpID")[0];E=Y[{ATVPDKIKX0DER:g.NA,A2EUQ1WTGCTBG2:g.NA,A1AM78C64UM0Y8:g.NA,A39IBJ37TRP1C6:g.FE,AD2EMQ3L3PG8S:g.FE,A1VC38T7YXB528:g.FE,A19VAU5U5O7RUS:g.FE,A1F83G8C2ARO7P:g.EU,A1PA6795UKMFR9:g.EU,A13V1IB3VIYZZH:g.EU,APJ6JRA9NG5V4:g.EU,A1RKKUPIHCS9HS:g.EU,ARBP9OOSHTCHU:g.EU,A21TJRUUN4KGV:g.EU,A1805IZSGTT6HS:g.EU,A2VIGQ35RCS4UG:g.EU,A17E79C6D8DWNP:g.EU,A33AVAJ2PDY3EV:g.EU,A1C3SOZRARQ6R3:g.EU,A2NODRKZP88ZB9:g.EU}[E.value]];
h={textAfterValidation:h,violationMap:{}};h=H(Z,h,!0);h=H(X,h,!1);E&&(h=H(E,h,!1));if(0<Object.keys(h.violationMap).length)N(!1),r.count("textFeedbackFailedValidation",1);else{h=h.textAfterValidation;x={feedbackType:C.Text,feedbackContentIntValue:L,feedbackContentString:encodeURIComponent(h),feedbackQuestion:encodeURIComponent(x),feedbackAsin:t};O(x);if(x=f["default"].cardRoot.getElementsByClassName("_shopping-cx-feedback-widget_style_feedback-submit-button__1SErF")[0])x.getElementsByTagName("input")[0].disabled=
!0;P()}});n.addEventListener("input",function(){M&&"none"===M.style.display&&N(!0);n.value&&0<n.value.trim().length?I.classList.remove("_shopping-cx-feedback-widget_style_textFeedbackSubmitHidden__1fujz"):I.classList.add("_shopping-cx-feedback-widget_style_textFeedbackSubmitHidden__1fujz");n.value&&0<n.value.length&&!w&&(D(!0),w=!0);n.value&&0<n.value.length||!w||(D(!1),w=!1);var h=f["default"].cardRoot.querySelector("#textFeedbackAlertLimit");1E3<=n.value.length?null===h||void 0===h?void 0:h.style.setProperty("display",
"block"):null===h||void 0===h?void 0:h.style.setProperty("display","none")})}}).catch(function(v){P()})});e=f["default"].cardRoot.getElementsByClassName("_shopping-cx-feedback-widget_style_close__2J0I_");for(c=0;c<e.length;c++){var q=e[c];q.addEventListener("click",function(){return Q(a)});q.addEventListener("keydown",function(k){"Enter"===k.key&&Q(a)})}},Q=function(a){var b=f["default"].createElement("div");b.className="_shopping-cx-feedback-widget_style_confirmationDialog__3fV6A";b.setAttribute("role",
"dialog");b.setAttribute("aria-modal","true");b.innerHTML='\n        <div class="_shopping-cx-feedback-widget_style_dialogContent__fb-gl">\n            <div class="_shopping-cx-feedback-widget_style_dialogMessage__oft8i">\n                <p><b>'+u.hideWindowHeading+"</b></p>\n                <p>"+u.hideWindowContent+'</p>\n            </div>\n            <div class="_shopping-cx-feedback-widget_style_dialogActions__1TBnu">\n                <button class="_shopping-cx-feedback-widget_style_cancelButton__3HP6o">'+
u.cancel+'</button>\n                <button class="_shopping-cx-feedback-widget_style_confirmButton__Wf6Jz">'+u.hide+"</button>\n            </div>\n        </div>\n    ";var d=function(){r.count("shoppingcxWidgetDismissed",1);D(!1);z().postWidgetDismissed().then(function(l){});F(a);localStorage.setItem("feedbackWidgetDismissed",Date.now().toString());b.remove()},c=function(){b.remove()},e=b.querySelector("._shopping-cx-feedback-widget_style_confirmButton__Wf6Jz"),m=b.querySelector("._shopping-cx-feedback-widget_style_cancelButton__3HP6o");
e&&e.addEventListener("click",d);m&&m.addEventListener("click",c);b.addEventListener("keydown",function(l){"Escape"===l.key&&c()});b.addEventListener("click",function(l){l.target===b&&c()});f["default"].cardRoot.appendChild(b);e instanceof HTMLElement&&e.focus()},ha=function(a,b,d){a={feedbackType:C.Rating,feedbackContentIntValue:a,feedbackQuestion:encodeURIComponent(b),feedbackAsin:d};O(a)},O=function(a){z().postFeedbackData(a).then(function(b){})},F=function(a){a.style.display="none"},N=function(a){var b=
f["default"].cardRoot.getElementsByClassName("_shopping-cx-feedback-widget_style_text-feedback-alert-info__iTrz-")[0],d=f["default"].cardRoot.getElementsByClassName("_shopping-cx-feedback-widget_style_text-feedback-alert-error__1Y0pJ")[0],c=a?b:d;a=a?d:b;c&&a&&"none"!==a.style.display&&(F(a),c.style.display="inline-block")},D=function(a){var b,d;(null===(d=null===(b=null===G["default"]||void 0===G["default"]?void 0:G["default"].cardRoot)||void 0===b?void 0:b.ownerDocument)||void 0===d?void 0:d.defaultView).onbeforeunload=
a?function(c){c.preventDefault();c.returnValue=""}:null},P=function(){var a=f["default"].cardRoot.getElementsByClassName("widgetContentContainer")[0],b=f["default"].cardRoot.getElementsByClassName("_shopping-cx-feedback-widget_style_thank-you-view-placeholder__2G21U")[0],d=f["default"].cardRoot.getElementsByClassName("_shopping-cx-feedback-widget_style_shopping-cx-feedback-widget__3OJWU")[0],c=f["default"].cardRoot.getElementsByClassName("_shopping-cx-feedback-widget_style_close__2J0I_")[0];a&&b&&
(a.innerHTML=b.innerHTML);c&&F(c);setTimeout(function(){d&&F(d)},3E3)};J._operationNames=["getRatingFeedbackHtml","getTextFeedbackHtml","postFeedbackData","postWidgetDismissed"];J.card=function(){return p.__awaiter(void 0,void 0,void 0,function(){return p.__generator(this,function(a){switch(a.label){case 0:return[4,V["default"].pageReady];case 1:return a.sent(),[4,ea()];case 2:return a.sent(),[4,ca()];case 3:return a.sent(),[2]}})})}});
