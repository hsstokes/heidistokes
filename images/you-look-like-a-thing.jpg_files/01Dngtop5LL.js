'use strict';(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("DetailPageBookDealsAssets@notificationSubscriptions","DetailPageBookDealsAssets"):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("A","a-switch","ready").execute("notificationSubscription",function(a){function b(a){if("undefined"!==typeof a){const b=c.ue;if(b&&b.count){const e="BooksDP:NotificationSubscription:"+a;a=b.count(e)||0;b.count(e,a+
1)}}}function d(b,d,f,c){a.ajax(d,{method:"post",params:b,paramsFormat:"json",dataType:"json",contentType:"application/json",processData:!1,success:function(a){"CALL_SUCCESS"===a.status?f():c()},error:function(a){c()}})}function g(){a.$("#notificationSubscription #nsErrorMessage").removeClass("aok-hidden");b("Failure")}function h(){a.$("#notificationSubscription #nsErrorMessage").addClass("aok-hidden")}function k(){h();a.$("#notificationSubscription #nsUnsubscribe").addClass("aok-hidden");a.$("#notificationSubscription #nsSubscribe").removeClass("aok-hidden");
const e=a.$("#notificationSubscription input");e.attr("aria-label",f.subscribeMessage);e.attr("aria-live","polite");b("CustomerUnsubscribed")}function l(){h();a.$("#notificationSubscription #nsSubscribe").addClass("aok-hidden");a.$("#notificationSubscription #nsUnsubscribe").removeClass("aok-hidden");const e=a.$("#notificationSubscription input");e.attr("aria-label",f.unsubscribeMessage);e.attr("aria-live","polite");b("CustomerSubscribed")}const f=a.state("notificationSubscriptionData");a.on("a:switch:notification-subscription-switch:flip",
function(a){try{a.switchState.isOn?d(f.subscribeParams,f.subscribeLink,l,g):d(f.unsubscribeParams,f.unsubscribeLink,k,g),b("CustomerFlippedSwitch")}catch(m){g()}})})});