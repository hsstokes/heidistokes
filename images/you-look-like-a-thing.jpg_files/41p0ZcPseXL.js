(function(f){var e=window.AmazonUIPageJS||window.P,m=e._namespace||e.attributeErrors,v=m?m("DetailPageEbooksAssets",""):e;v.guardFatal?v.guardFatal(f)(v,window):v.execute(function(){f(v,window)})})(function(f,e,m){"use strict";f.when("A","jQuery","atf").execute(function(d,a){var b=a("#udpKcpAppAdImage");a=a("#udpComiXologyAd");b.length&&d.loadHiResImage(b);a.length&&d.loadHiResImage(a)});"use strict";"use strict";f.when("A","jQuery","contentQualityWidgetReady").execute(function(d,a,b){a.ajax("/kindle-dbs/reftag?ref\x3d"+
b.onloadReftag,{method:"get",cache:!1});d.on("a:popover:show:kcqPopverPreload",function(){var c=e.ue;c&&c.count&&c.count("desktop:kindleContentQuality:shown",1);a.ajax("/kindle-dbs/reftag?ref\x3d"+b.hoverOverReftag,{method:"get",cache:!1})})});"use strict";f.when("A","jQuery","atf","a-carousel-framework").execute(function(d,a,b,c){function g(b){a.ajax("/kindle-dbs/reftag?ref_\x3d"+b,{method:"get",data:n})}function q(b,c){b=a(e).scrollTop();var d=a(e).scrollLeft(),g=d+a(e).width(),l=b+a(e).height(),
h=a(c).offset();h.right=h.left+a(c).outerWidth();h.bottom=h.top+a(c).outerHeight();return!(h.right<d||h.left>g||h.top>l||h.bottom<b)}var n={pageType:"featureAwareness",subPageType:"featureAwarenessShoveler",hitType:"dataOnly"};c.onInit("faw-carousel",function(b){function c(l,h){l=a("\x3cimg\x3e");l.load(function(){q(m,h)&&a(h).attr("aria-posinset")==b.getAttr("firstVisibleItem")&&(a(h).find(".fawPrimaryImage").attr("src",a(this).attr("src")),a(h).addClass("loadedCard"),g(a(h).data("gifTag")))});l.attr("src",
a(h).data("gifUrl"))}function n(c,h){q(m,h)&&a(h).attr("aria-posinset")==b.getAttr("firstVisibleItem")||(a(h).find(".fawPrimaryImage").attr("src",a(h).data("imgUrl")),a(h).removeClass("loadedCard"))}function w(){setTimeout(function(){a(".fawCarouselCard").eq(b.getAttr("firstVisibleItem")-1).filter(q).not(".loadedCard").each(c);a(".fawCarouselCard").filter(".loadedCard").each(n)},300)}d.on.afterLoad(w);d.on.scroll(w);d.on("a:carousel:faw-carousel:change:firstVisibleItem",function(c){c=b.getAttr("totalPages");
var h=a("#fawCarousel").width(),d=a(".fawCarouselCard").outerWidth(),h=Math.trunc(h/d),d=a(".faw-carousel-left-button"),g=a(".faw-carousel-right-button");"1"==b.getAttr("firstVisibleItem")?(d.addClass("aok-hidden"),g.removeClass("aok-hidden")):c-(b.getAttr("firstVisibleItem")-1)==h?(d.removeClass("aok-hidden"),g.addClass("aok-hidden")):(d.removeClass("aok-hidden"),g.removeClass("aok-hidden"));w()});a(".fawVideoTrigger").bind("click",function(b){b.preventDefault();b=a(this).parent(".fawCarouselCard").attr("aria-posinset")-
1;a(".faw-modal").css("display","inline");a(".faw-modal").css("visibility","visible");var c=playList[b];a("#fawIframe").attr("src",c);a("#fawIframe").attr("index",b);var c=playList.length,d=b+1+" of "+c;a(".videoIndex").text(d);0==b?(a(".previous-video").css("visibility","hidden"),a(".next-video").css("visibility","visible")):b==c-1?(a(".next-video").css("visibility","hidden"),a(".previous-video").css("visibility","visible")):(a(".previous-video").css("visibility","visible"),a(".next-video").css("visibility",
"visible"));g(a(this).data("refTag"));return!1});a(".previous-video").bind("click",function(b){b=a("#fawIframe").attr("index");1==b?a(".previous-video").css("visibility","hidden"):a(".previous-video").css("visibility","visible");a(".next-video").css("visibility","visible");var c=b+" of "+playList.length;a(".videoIndex").text(c);b=--b;c=playList[b];a("#fawIframe").attr("src",c);a("#fawIframe").attr("index",b);g(refTagList[b])});a(".next-video").bind("click",function(b){var c=a("#fawIframe").attr("index");
c==playList.length-1-1?(a(".previous-video").css("visibility","visible"),a(".next-video").css("visibility","hidden")):(a(".previous-video").css("visibility","visible"),a(".next-video").css("visibility","visible"));b=++c;var d=playList[b];a("#fawIframe").attr("src",d);a("#fawIframe").attr("index",b);c=c+1+" of "+playList.length;a(".videoIndex").text(c);g(refTagList[b])});a(".close-video").bind("click",function(b){a("#fawModal").css("display","none")});a(".fawCarouselCard").bind("mouseenter",function(b){b.preventDefault();
b=a(".loadedCard").parent(".fawCarouselCard");a(".loadedCard").attr("src",a(b).attr("data-img-url"));a(".loadedCard").removeClass("loadedCard");b=a(this).find(".fawPrimaryImage");a(b).attr("src",a(this).attr("data-gif-url"));a(b).addClass("loadedCard")})})});"use strict";f.when("a-carousel-framework","a-carousel-display-fawdisplay").execute(function(d,a){d.registerStrategy("display","fawDisplay",a)});f.when("A","jQuery","a-carousel-constants").register("a-carousel-display-fawdisplay",function(d,a,
b){var c={};c[b.PAGE_SIZE]=1;var g,q;return{initAttrs:c,init:function(a){a.dom.$carousel.children("li").css("visibility","visible");g=a.getAttr(b.SET_SIZE);q=260*g;a.dom.$carousel.width(q);a.updateDimensionsCache({carousel:{width:q},items:d.map(d.range(g),function(){return{width:250,outerWidth:260}})});this.repaint(a)},repaint:function(c){var d=c.getDimensions().viewport.width;c.setAttr(b.PEEK_WIDTH,(d-250)/2,!1);a(".faw-carousel-right-button").css("left",d-15+"px");q<=d?a(".faw-carousel-buttons").css("display",
"none"):a(".faw-carousel-buttons").css("display","inline")},resize:function(a,b){b.viewport&&b.viewport.width!==m&&this.repaint(a)}}});"use strict";f.when("A","ready").execute(function(d){var a=!1,b=d.state("deliverToState");if(b){var c=b.deliverToDropdownName;b.asinRequiresSecureDelivery&&f.when("A","a-alert","a-dropdown").execute(function(a,d,n){var e=d(".ebookBuyboxDrmDeliverToAlert"),k=b.customerDeviceMap,y=!1,w=function(a){var c=a.message;a.actionLinkHref&&a.actionLinkText&&(!b.isTextbook&&b.secureDeliveryInfoWithHeader&&
(c+="\x3cbr\x3e",e.type("info").heading(b.updateRequiredHeader)),c=c+' \x3ca class\x3d"a-link-normal" href\x3d"'+a.actionLinkHref+'"\x3e'+a.actionLinkText+"\x3c/a\x3e");e.html(c).show();ue&&ue.count&&!y&&ue.count("deliverToDRMWarningDisplayCount",1);y=!0};(d=k[b.dropdownDefaultOption].warningMessage)&&w(d);a.on(c,function(c){var d=null;if(c.value in k||b.isTextbook)d=k[c.value].warningMessage;d?w(d):e.hide();a.$(".ebookBuyboxDeliverToDropdown").each(function(a,b){n.getSelect(b).setValue(c.value)})})});
d.on(c,function(c){ue&&ue.count&&!a&&(b.metricName?ue.count(b.metricName,1):ue.count("deliverToSelectionCount",1),b.isTextbook&&ue.count("deliverToSelectionForEtextbookCount",1),a=!0)})}});"use strict";f.when("A","jQuery","ready").register("accordionInstrumentation",function(d,a){var b=e.ue,c,g=function(){this.accordionType="";this.accordionCounterId="ebookAccordion";this.setAccordionCounterId=function(a){this.accordionCounterId=a;this.accordionType||(this.accordionType=a)};this.addRowsToCounterId=
function(a){a=a.replace(/([^\[\],\s]+)/g,'"$\x26"').toLowerCase();if(a=JSON.parse(a)){for(row in a)this.accordionCounterId+="-"+a[row];b&&b.count&&b.count(this.accordionCounterId,0)}};this.accordionSwitch=function(){b&&b.count&&b.count(this.accordionCounterId,1+(b.count(this.accordionCounterId)||0))};this.buttonClick=function(a){var c="ebookUnifiedBuybox";this.accordionType&&(c=this.accordionType);b&&b.count&&b.count(c+"-"+a,b.count(this.accordionCounterId)||0)}};return{counter:function(){c||(c=new g);
return c}}});"use strict";f.when("A","nfcxMessageMetrics").execute(function(d,a){d.on("a:popover:hide:NfcxPopover",function(d){b("Nfcx:message:popup:close:"+a.nfcxWeblabTreatment);c()});d.on("a:popover:show:NfcxPopover",function(d){b("Nfcx:message:popup:open:"+a.nfcxWeblabTreatment);c()});var b=function(a){e.ue&&ue.tag&&(ue.tag(a,"nfcxAlert"),ue.count(a,1))},c=function(){e.ue&&uex("ld","nfcxAlert")}});"use strict";f.when("A").execute(function(d){d.on("a:popover:hide:oneClickInfoPopover",function(c){a("oneClickInfoPopover:popup:close");
b()});d.on("a:popover:show:oneClickInfoPopover",function(c){a("oneClickInfoPopover:popup:open");b()});var a=function(a){e.ue&&ue.tag&&(ue.tag(a,""),ue.count(a,1))},b=function(){e.ue&&uex("ld","oneClickInfoPopover")}});"use strict";f.when("A","jQuery").execute(function(d,a){a(".pointsAwarePriceBlock .loyaltyPointsToolTip").removeAttr("title")});"use strict";var v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"===typeof Symbol&&
d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d};(function(d){var a="";d.when("A","jQuery","accordionInstrumentation","ready").execute(function(b,c,d){function q(a,b,d){"mobile"==a?(b.show(),b.removeClass("a-button-focus"),b.addClass("a-button-disabled"),b.find("button").attr("disabled",!0),b.find("button").text(d)):c("#view-cart-button-container").removeClass("aok-hidden")}function n(a,b){for(var c=0;c<a.length;c++)if(a[c].rel===b)return a[c]}function z(a){e.ue&&e.ue.count()&&ue.count(a,
1)}b.declarative("add-to-ebooks-cart","click",function(b){var d=b.data.surface,g=b.data.disabledButtonText,l=c("#cart-button-container"),h=c("#add-to-ebooks-cart-spinner"),f=c("#add-to-ebooks-cart-message"),A={asin:b.data.asin,csrf:b.data.csrf,action:"add"},x=c("#deliverTo").find(":selected").val();x!==m&&/^[0-9a-zA-Z]+$/.test(x)&&(A.device={encryptedDeviceAccountId:x});["#add-to-ebooks-cart-violation-message","#add-to-ebooks-cart-success-message","#add-to-ebooks-cart-warning-message","#add-to-ebooks-cart-error-message"].forEach(function(a){f.find(a).hide()});
var p="#add-to-ebooks-cart-error-message";l.hide();h.removeClass("aok-hidden");c.ajax({url:b.data.url,type:"POST",dataType:"json",data:JSON.stringify(A),contentType:"application/json",headers:{Accept:"application/json"},success:function(b){c("html, body").animate({scrollTop:0},"slow");h.addClass("aok-hidden");if(b.resources&&b.resources.detailedStatus&&b.resources.links){var k=l.find("button"),t=b.resources,u=t.detailedStatus,r=t.links;b=n(r,"ebooks-cart").url;a=n(r,"ebooks-checkout").url;r=t.navCartCount;
"object"===v(e.navbar)&&"function"===typeof e.navbar.setCartCount&&(r===m||isNaN(Number(r))||e.navbar.setCartCount(r));switch(u){case "ok":case "buyablePriceUnavailable":case "priceIncrease":p="#add-to-ebooks-cart-success-message";q(d,l,g);break;case "duplicateAddition":p="#add-to-ebooks-cart-violation-message";q(d,l,g);break;case "alreadyOwned":p="#add-to-ebooks-cart-violation-message";l.show();l.removeClass("a-button-focus");l.addClass("a-button-disabled");k.attr("disabled",!0);break;case "limitExceeded":case "unavailable":p=
"#add-to-ebooks-cart-warning-message","limitExceeded"===u&&f.find("#cart-overflow-sub-instruction").removeClass("aok-hidden"),l.show()}k=f.find(p);u=t.displayMessage.displayString;k.find(".cart-message").text(u);if("#add-to-ebooks-cart-success-message"===p||"#add-to-ebooks-cart-violation-message"===p&&"mobile"===d){var u=t.referenceData.bundle.summary,t=u.totalItemCount,u=u.totalPriceWithTaxAndDiscount.newFormattedPrice,r=k.find("#cart-summary-item-count"),x=t+" "+r.data("item-label");1<t&&(x=t+" "+
r.data("items-label"));r.text("("+x+"): ");k.find("#cart-summary-total-amount").text(u)}"mobile"===d?(c("[id\x3debook-cart-navigation-button]").attr("href",b),c("[id\x3debook-cart-url]").attr("href",b)):c("[id\x3debook-cart-navigation-button]").find("a").attr("href",b);z(p);k.show()}else l.show(),f.find(p).show(),z(p+"-from-no-response")},error:function(){c("html, body").animate({scrollTop:0},"slow");h.addClass("aok-hidden");l.show();f.find(p).show();z(p+"-error-no-response")}})});b.declarative("checkout-ebooks-cart",
"click",function(b){c('\x3cform method\x3d"POST" action\x3d"'+a+'"\x3e\x3c/form\x3e').appendTo("body").submit()})})})(e.P._namespace("ebooksAddToCart"));"use strict";f.when("A","jQuery","ready").register("inline-buy-utility",function(d,a){function b(b){var d;try{d=b.resources[0].states[0].links[0].url}catch(g){c("BifrostReturnUrl_Failure")}a(location).attr("href",d)}var c=function(a){e.ue&&e.ue.tag&&e.ue.count&&(e.ue.tag(a,"seriesAsinList"),e.ue.count(a+"count",1))},g=function(a){a.addClass("aok-hidden")};
return{parentUntilApi:function n(a,b){return 0<a.parent().find(b).length?a:n(a.parent(),b)},greyOutElementApi:function(a){a.css({opacity:.4})},positionOnApi:function(a,b,c){var d=a.position(),g=d.left,d=d.top;"right"===b?g-=c.outerWidth()-a.outerWidth():"center"===b&&(g-=c.outerWidth()/2-a.outerWidth()/2,d-=c.outerHeight()/2-a.outerHeight()/2);c.css({position:"absolute",zIndex:5E3,top:d,left:g})},callBifrostApi:function(e,f,k,y){e={csrf:f.csrf};"undefined"!==typeof f.device&&"undefined"!==typeof f.device.encryptedId&&
(e.device={encryptedDeviceAccountId:f.device.encryptedId});d.ajax(f.actionUrl,{method:"post",contentType:"application/json",accepts:"application/json",params:e,timeout:5E3,paramsFormat:"json",success:function(d){if("Error"===d.status&&"authentication_failure"===d.errorResult.responseCode)try{var e=d.errorResult.links[0].url+"\x26returnURI\x3d"+document.location.pathname+"\x26returnParams\x3d\x26suppressRememberMe\x3d1";a(location).attr("href",e)}catch(n){c("BifrostSignInUrlFailure")}var h;try{h=d.resources[0].states[0].responseCode}catch(n){c("BifrostResponseCode_Failure")}try{switch(h){case "OK":c("SeriesSubscriptionSuccessful");
var k=a("#series-subscription-success"),y=a("#series-subscribe-widget"),m=a("#itemSpinner_"+f.positionLabel);k.removeClass("aok-hidden");g(m);g(y);k.css({opacity:1});break;case "PAYMENT_VIOLATION":c("SeriesSubscriptionPaymentFixup");b(d);break;default:c("SeriesSubscriptionRedirection"),b(d)}}catch(n){c("SeriesSubscriptionUIBifrostResponseCodeError")}},error:function(b,d,e){c("SeriesSubscriptionUIErrorTemplate");b=a("#series-subscription-error");d=a("#series-subscribe-widget");e=a("#itemSpinner_"+
f.positionLabel);b.removeClass("aok-hidden");g(e);g(d);b.css({opacity:1})}})},bifrostParametersApi:function(a,b,c,d,g,e,f){this.actionUrl=a;this.csrf=b;this.x_client_id=c;this.positionLabel=d;this.asin=g;this.readNowUrl=e;this.actionType=f}}});"use strict";f.when("A").execute("ebooks-ContactUsWidget",function(d){var a=d.$,b=function(a){ue&&ue.count&&(ue.tag("ContactUsWidget"),ue.count(a,1))};a("#ebooksContactUs").ready(function(){b("ebooks_contact_us_link_loaded_count")});a("#ebooksContactUsLink").click(function(){b("ebooks_contact_us_link_click_count");
var c=a(this).attr("href");setTimeout(function(){e.location=c},1);return!1})});"use strict";"use strict";"use strict";f.when("A","jQuery","ready").execute("ebooksEmailSubscription",function(d,a){function b(b,c,d){return a.ajax({url:c,data:b,type:d,contentType:"application/json",cache:!1})}function c(){d.$("#emailsubs-subscribe-section").toggleClass("aok-hidden");d.$("#emailsubs-unsubscribe-section").toggleClass("aok-hidden")}var g=a("#emailsubs-widget-section"),e=g.data("subscribe-url"),f=g.data("unsubscribe-url"),
m=g.data("disable-widget-url"),k={subscriptionId:g.data("subscription-id"),csrfToken:g.data("csrf-token")};d.declarative("emailsubs-subscribe","click",function(){b(JSON.stringify(k),e,"POST").done(function(a){"CALL_SUCCESS"===a.status&&c()})});d.declarative("emailsubs-unsubscribe","click",function(){b(JSON.stringify(k),f,"POST").done(function(a){"CALL_SUCCESS"===a.status&&c()})});d.declarative("disableEmailSubsWidget","click",function(){var a={csrfToken:g.data("csrf-token")};b(a,m,"GET");g.hasClass("visible")&&
g.removeClass("visible");g.hasClass("visibleAW")&&g.removeClass("visibleAW")})});"use strict";"use strict";f.when("A","ebooksURLUtil","ready").execute("ebooksDPPageRefreshHelper",function(d,a){d=d.createClass({_dataToBePersisted:{},refreshPage:function(){if(0<Object.keys(this._dataToBePersisted).length){var b=JSON.stringify(this._dataToBePersisted),c=e.location.href,c=a.removeURLParameter(c,["dataPersistedOnPageRefresh"]),c=a.appendURLParameter(c,{dataPersistedOnPageRefresh:b});e.location.replace(c)}else e.location.reload()},
persist:function(a,c){this._dataToBePersisted[a]=c},logMetrics:function(a,c){e.ue&&e.ue.count&&e.ue.count(a,c)},getPersistedData:function(b){var c=a.getQueryStringParameter("dataPersistedOnPageRefresh");try{var d=c?JSON.parse(decodeURIComponent(c))[b]:null;this.logMetrics("DP:eBooks:invalidQueryParameter",0);return d}catch(e){this.logMetrics("DP:eBooks:invalidQueryParameter",1)}return null}});f.declare("ebooksPageRefreshHelper",new d)});"use strict";f.when("A","ready").register("ebooksURLUtil",function(d){return{appendURLParameter:function(a,
b){if(b==m||0==Object.keys(b).length)return a;b=d.$.param(b).replace(/\+/g,"%20");var c=-1==a.indexOf("?")?"?":"\x26";return a+c+b},removeURLParameter:function(a,b){var c=a.split("?");if(2==c.length){var d=c[1].split("\x26");b.forEach(function(a){a+="\x3d";for(var b=d.length-1;0<=b;b--)if(0==d[b].lastIndexOf(a,0)){d.splice(b,1);break}});a=d.length?c[0]+"?"+d.join("\x26"):c[0]}return a},getQueryStringParameter:function(a){var b=void 0,c=[];b==m&&(b=e.location.href);for(var d=b.slice(b.indexOf("?")+
1).split("\x26"),f=0;f<d.length;f++)b=d[f].split("\x3d"),c.push(b[0]),c[b[0]]=b[1];return c[a]},isAbsoluteURL:function(a){return/^https?:\/\//i.test(a)}}});"use strict";"use strict";"use strict";f.declare("ebooks-retail-add-to-cart-metrics",{MULTIPLE_ASINS:"DP:EbooksRetailCart:Desktop:KindleEbooksAndAudibleAsinsAdded",SINGLE_ASIN:"DP:EbooksRetailCart:Desktop:KindleEbookAsinAdded",NO_ASINS:"DP:EbooksRetailCart:Desktop:NoAsinsAdded",ACCB_ENABLED:"DP:EbooksRetailCart:Desktop:AccbEnabled",ACCB_DISABLED:"DP:EbooksRetailCart:Desktop:AccbDisabled",
POINTS_ATC_DISABLED:"DP:EbooksRetailCart:Desktop:Points:AddToCartDisabled",POINTS_ATC_ENABLED:"DP:EbooksRetailCart:Desktop:Points:AddToCartEnabled"})});